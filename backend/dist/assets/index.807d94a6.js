var e=Object.defineProperty,t=Object.defineProperties,a=Object.getOwnPropertyDescriptors,n=Object.getOwnPropertySymbols,l=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,s=(t,a,n)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[a]=n;import{r as i,a as o,R as c,B as m,D as u,s as p,L as d,b as g,H as E,c as f,T as w,u as h,d as y,G as v,C as x,e as b,f as z}from"./vendor.12ff0186.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const k=()=>{const[e,t]=i.exports.useState([]);return i.exports.useEffect((async()=>{const e=await o.get("http://localhost:3000/aggregates/timeseries");console.log(e),t(e.data)}),[]),c.createElement(m,null,c.createElement(m,null,c.createElement(u,{alignSelf:"start",size:{height:"medium",width:"large"},detail:!0,data:e,series:[{property:"date",render:(e,t,a)=>new Date(e).toDateString()},"count"],chart:[{property:"count",type:"line",opacity:"medium",thickness:"xsmall"},{property:"count",type:"point",point:"circle",thickness:"xsmall",round:!0}],guide:{x:{granularity:"fine"}},axis:{x:{property:"date"},y:{property:"count"}}})))},$=p(d)`
  text-decoration: none;
  color: inherit;
  :visited {
    color: inherit;
  }
  &:hover {
    text-decoration: underline;
  }
  &.active {
    color: red;
  }
`,S=()=>{const[e,t]=i.exports.useState([]),[a,n]=i.exports.useState(0),[l,r]=i.exports.useState(0);return i.exports.useEffect((async()=>{const{data:e}=await o.get(`http://localhost:3000/tweets/page/${a}`);console.log(e),r(e.count/5),t(e.rows)}),[a]),c.createElement(m,null,c.createElement(m,{align:"center",direction:"row",gap:"small"},c.createElement(m,{onClick:()=>{0!=a&&n(a-1)},focusIndicator:!1},c.createElement(g,{size:"medium"})),c.createElement(E,{level:5}," ",`showing ${a+1} of ${l} pages`),c.createElement(m,{onClick:()=>{a!=l&&n(a+1)},focusIndicator:!1},c.createElement(f,{size:"medium"}))),c.createElement(m,{gap:"small"},e.map((e=>c.createElement(m,{round:"small",border:{color:"light-2",size:"small"},pad:"medium",gap:"medium"},c.createElement(w,{size:"large"},e.text),c.createElement(m,{direction:"row-responsive",gap:"small"},c.createElement(w,{size:"medium",weight:"300"},e.authorName),c.createElement(w,{size:"medium",weight:"300"},c.createElement($,{to:`${e.id}`},new Date(e.tCreatedAt).toDateString()))))))))},C=()=>{const[e,t]=i.exports.useState({}),a=h();return i.exports.useEffect((async()=>{const e=a.pathname.split("/")[2],n=await o.get(`http://localhost:3000/tweet/${e}`);console.log(n.data),t(n.data)}),[]),c.createElement("div",null,c.createElement(E,{level:3},"Full Tweet"),c.createElement(y,{src:e}))};function O({tweets:e}){return c.createElement(m,{gap:"small"},e.map((e=>c.createElement(m,{round:"small",border:{color:"light-2",size:"small"},pad:"medium"},c.createElement(w,{size:"large"},e.text),c.createElement(w,{size:"medium",weight:"500"},c.createElement(d,{to:`/timeline/${e.id}`},new Date(e.eTwitterCreatedAt.slice(0,-7)).toDateString()))))))}var D="https://finance-dashboard.fly.dev/api";const I=()=>{const[e,u]=i.exports.useState([]),[p,d]=i.exports.useState(""),[h,y]=i.exports.useState({hashtags:[],mentions:[],annotations:[],urls:[],contextEntities:[],languages:[],labels:[]}),[v,x]=i.exports.useState(0),[b,z]=i.exports.useState(void 0);async function k(e,t){let a=[];z({type:e,value:t,page:v});a=(await o.post(`${D}/tweet/query/`,{type:e,value:t})).data.tweets,u(a),d(`showing tweets for ${e} : ${t.label?t.label:t}`)}return i.exports.useEffect((()=>{!async function(){let{data:e}=await o.get(`${D}/aggregate`);console.log(e),y(e)}()}),[]),i.exports.useEffect((async()=>{console.log(b,v);var e,i;const c=(await o.post(`${D}/tweet/query/`,(e=((e,t)=>{for(var a in t||(t={}))l.call(t,a)&&s(e,a,t[a]);if(n)for(var a of n(t))r.call(t,a)&&s(e,a,t[a]);return e})({},b),i={page:v},t(e,a(i))))).data.tweets;u(c)}),[v]),c.createElement(m,null,c.createElement(m,{direction:"row-responsive",gap:"small",align:"center"},c.createElement(w,{weight:600,size:"medium"},"Language"," "),h.languages.map(((e,t)=>c.createElement(m,{key:t,onClick:()=>k("language",e.lang),direction:"row",width:"fit-content"},c.createElement(w,{size:"small"},`${e.lang}(${e.count})`))))),c.createElement(m,{direction:"row-responsive",gap:"small",wrap:!0,align:"center"},c.createElement(w,{weight:600,size:"medium"}," ","Hashtags"," "),h.hashtags.map(((e,t)=>c.createElement(m,{width:"fit-content",key:t,onClick:()=>k("hashtag",e.tag)},c.createElement(w,{size:"small"},`#${e.tag}(${e.count})`))))),c.createElement(m,{direction:"row-responsive",gap:"small",wrap:!0,align:"center"},c.createElement(w,{weight:600,size:"medium"}," ","Mentions"," "),h.mentions.map(((e,t)=>c.createElement(m,{key:t,onClick:()=>k("mentions",e.username)},c.createElement(w,{size:"small"},`${e.username}(${e.count})`))))),c.createElement(m,{direction:"row-responsive",gap:"small",wrap:!0,align:"center"},c.createElement(w,{weight:600,size:"medium"}," ","Context Entities"," "),h.contextEntities.map(((e,t)=>c.createElement(m,{key:t,onClick:()=>k("contextEntity",e.name)},c.createElement(w,{size:"small"},`${e.name}(${e.count})`))))),c.createElement(m,{direction:"row-responsive",gap:"small",wrap:!0,align:"center"},c.createElement(w,{weight:600,size:"medium"},"URLs"," "),h.urls.map(((e,t)=>c.createElement(m,{key:t,onClick:()=>k("url",e.url)},c.createElement(w,{size:"small"},`${e.url}(${e.count})`))))),c.createElement(m,{direction:"row-responsive",gap:"small",wrap:!0,align:"center"},c.createElement(w,{weight:600,size:"medium"},"Annotations"," "),h.annotations.map(((e,t)=>c.createElement(m,{key:t,onClick:()=>k("annotations",e.normalizedText)},c.createElement(w,{size:"small"},`${e.normalizedText}(${e.count})`))))),c.createElement(m,{direction:"row-responsive",gap:"small",wrap:!0,align:"center"},c.createElement(w,{weight:600,size:"medium"},"Labels"," "),h.labels.map(((e,t)=>c.createElement(m,{key:t,onClick:()=>k("labels",e.label)},c.createElement(w,{size:"small"},`${e.label}(${e.count})`))))),c.createElement(E,{level:5,fill:!0},p),e.length>0?c.createElement(m,{align:"center",direction:"row",gap:"small"},c.createElement(m,{onClick:()=>{0!=v&&x(v-1)},focusIndicator:!1},c.createElement(g,{size:"medium"})),c.createElement(m,{onClick:()=>{x(v+1)},focusIndicator:!1},c.createElement(f,{size:"medium"}))):null,c.createElement(O,{tweets:e}))},L={scale:4,spacing:12,defaultMode:"dark",global:{colors:{background:"#ffffff",brand:"#04004a","accent-1":"#ffb703","accent-2":"#fb8500","neutral-1":"#8ecae6","text-dark":"#edc9c4","text-light":"#fcbfa4","visuals-1":"#ffebcb","visuals-2":"#fcbfa4","visuals-3":"#f4c6d7","visuals-4":"#f39695","visuals-5":"#e99469","visuals-6":"#f3a444","visuals-7":"#e56d67","visuals-8":"#815089","visuals-9":"#4d5182","visuals-10":"#020637",text:{dark:"#edc9c4",light:"#04004a"}},focus:{border:{color:"accent-1"}}}};function j(){return i.exports.useState(0),c.createElement(v,{theme:L,full:!0},c.createElement(m,{className:"App",flex:!0,margin:{top:"medium"}},c.createElement(m,{width:"720px",alignSelf:"center",gap:"small"},c.createElement(m,{direction:"row",align:"center",gap:"small"},c.createElement(x,{size:"large",color:"brand"}),c.createElement($,{to:"/"},c.createElement(E,{level:2,margin:"none"},"FinDash"))),c.createElement(m,{direction:"row",gap:"small"},c.createElement(d,{to:"/"},c.createElement(w,{size:"small"},"Home")),c.createElement(d,{to:"timeline"},c.createElement(w,{size:"small"},"Timeline")),c.createElement(d,{to:"explore"},c.createElement(w,{size:"small"},"Explore"))),c.createElement(m,null,c.createElement(b,null,c.createElement(k,{path:"/"}),c.createElement(S,{path:"timeline"}),c.createElement(C,{path:"timeline/:tweetId"}),c.createElement(I,{path:"explore"}))))))}z.render(c.createElement(c.StrictMode,null,c.createElement(j,null)),document.getElementById("root"));
